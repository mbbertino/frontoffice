var MainRouter=Backbone.Router.extend({routes:{"":"homePage","team/:id":"teamDashboardPage"},initialize:function(){},homePage:function(){Parse.User.current()?new CoachDashboard:new AppView},teamDashboardPage:function(a){if(Parse.User.current()){var b=new Parse.Query(Team);b.get(a,{success:function(a){if(a.user=Parse.User.current()){new TeamDashboard({model:a}),new TeamHeaderBar({model:a})}else new CoachDashboard}})}else new AppView},guestDashboardPage:function(){}}),Team=Parse.Object.extend("Team"),TeamsCollection=Parse.Collection.extend({model:Team}),Player=Parse.Object.extend("Player"),PlayersCollection=Parse.Collection.extend({model:Player}),Coach=Parse.Object.extend("Coach"),CoachesCollection=Parse.Collection.extend({model:Coach}),Event=Parse.Object.extend("Event"),EventsCollection=Parse.Collection.extend({model:Event}),Message=Parse.Object.extend("Message"),MessagesCollection=Parse.Collection.extend({model:Message});$(function(){Parse.initialize("QpR5heInRkuUWXjzX6t1kjDIpoRHS2a0Nlk9V0eA","4NKxUeNv7QBqcuwhd3bnIwJA9f3sffVU6FLTCpwQ"),window.router=new MainRouter,Backbone.history.start()});var AppView=Parse.View.extend({className:"landingtainer",renderedTemplate:_.template($("#appview-template").text()),events:{"click .js-signup":"newsignUpView"},initialize:function(){$(".jumbotron").html(this.el),this.render()},render:function(){this.$el.html(this.renderedTemplate()),new MarketingView,new GuestHeaderBar},newsignUpView:function(){new SignUpView}}),GuestHeaderBar=Parse.View.extend({className:"container",renderedTemplate:_.template($("#guest-headerbar-template").text()),events:{"click .js-login":"logIn"},initialize:function(){$(".header").html(this.el),this.render()},render:function(){this.$el.html(this.renderedTemplate())},logIn:function(){Parse.User.logIn($(".js-login-username").val(),$(".js-login-password").val(),{success:function(){new CoachDashboard},error:function(a,b){alert("Error: "+b.code+" "+b.message)}})}}),UserHeaderBar=Parse.View.extend({className:"container",renderedTemplate:_.template($("#user-headerbar-template").text()),events:{"click .js-logout":"logOut"},initialize:function(){$(".header").html(this.el),this.render()},render:function(){this.$el.html(this.renderedTemplate())},logOut:function(){Parse.User.logOut(),new AppView}}),TeamHeaderBar=Parse.View.extend({className:"container",renderedTemplate:_.template($("#team-headerbar-template").text()),events:{"click .js-logout":"logOut"},initialize:function(){$(".header").html(this.el),this.render()},render:function(){this.$el.html(this.renderedTemplate())},logOut:function(){Parse.User.logOut(),new AppView}}),MarketingView=Parse.View.extend({className:"container",renderedTemplate:_.template($("#marketing-template").text()),initialize:function(){$(".marketing").html(this.el),this.render()},render:function(){this.$el.html(this.renderedTemplate())}}),SignUpView=Parse.View.extend({className:"signup-tainer col-xs-12",renderedtemplate:_.template($("#signup-template").text()),events:{"click .js-create-team":"newCoach"},initialize:function(){$(".inputtainer").html(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())},newCoach:function(){var a=new Parse.User;a.set("username",$(".js-coach-username").val()),a.set("password",$(".js-coach-password").val()),a.set("email",$(".js-coach-username").val()),a.signUp(null,{success:function(a){var b=new Team;b.set("teamname",$(".js-teamname").val()),b.set("sport",$(".js-team-sport").val()),b.set("user",a),console.log(a),b.save(null,{success:function(){}}),new CoachDashboard},error:function(a,b){alert("Error: "+b.code+" "+b.message)}})}}),CoachDashboard=Parse.View.extend({className:"container",renderedtemplate:_.template($("#coach-dashboard").text()),events:{"click .js-send-message-creation":"sendMessageForm","click .js-create-new-team":"addTeamForm"},sendMessageForm:function(){new MessageForm},addTeamForm:function(){new TeamForm},initialize:function(){$(".jumbotron").html(this.el),this.render(),new UserHeaderBar,$(".marketing").empty();var a=new Parse.Query(Team);a.equalTo("user",Parse.User.current()),a.find({success:function(a){_.each(a,function(a){new TeamSnapshot({model:a})})}})},render:function(){this.$el.html(this.renderedtemplate())}}),TeamSnapshot=Parse.View.extend({tagName:"a",className:"col-sm-6 col-xs-12 section",renderedtemplate:_.template($("#team-snapshot").text()),initialize:function(){$(".maincontent").append(this.el),this.setHref(),this.render()},render:function(){this.$el.html(this.renderedtemplate())},setHref:function(){var a=this.model.id,b="#/team/"+a;this.$el.attr({href:b})}}),TeamDashboard=Parse.View.extend({className:"container",renderedtemplate:_.template($("#team-dashboard").text()),events:{"click .js-send-message-creation":"sendMessageForm","click .js-add-event-creation":"addEventForm","click .js-add-player-creation":"addPlayerForm","click .js-add-coach-creation":"addCoachForm","click .js-team-settings":"teamSettingsForm"},sendMessageForm:function(){new MessageForm},addEventForm:function(){new NewEventForm},addPlayerForm:function(){new NewPlayerForm},addCoachForm:function(){new NewCoachForm},teamSettingsForm:function(){new TeamSettings},initialize:function(){$(".jumbotron").html(this.el),this.render();var a=new Parse.Query(Player);a.equalTo("team",this.model),a.find({success:function(a){_.each(a,function(a){new PlayerList({model:a})})}});var b=new Parse.Query(Coach);b.equalTo("team",this.model),b.find({success:function(a){_.each(a,function(a){new CoachList({model:a})})}});var c=new Parse.Query(Event);c.equalTo("team",this.model),c.ascending("date"),c.find({success:function(a){_.each(a,function(a){new EventList({model:a})})}});var d=new Parse.Query(Message);d.equalTo("team",this.model),d.descending("date"),d.find({success:function(a){_.each(a,function(a){new MessageList({model:a})})}})},render:function(){this.$el.html(this.renderedtemplate())}}),CoachList=Parse.View.extend({className:"coach-container col-xs-12",renderedtemplate:_.template($("#coach-list").text()),initialize:function(){$(".coaches").append(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),MessageList=Parse.View.extend({className:"message-container col-xs-12",renderedtemplate:_.template($("#message-list").text()),initialize:function(){$(".messages").append(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),PlayerList=Parse.View.extend({className:"player-container col-xs-12",renderedtemplate:_.template($("#player-list").text()),initialize:function(){$(".players").append(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),EventList=Parse.View.extend({className:"event-container col-xs-12",renderedtemplate:_.template($("#event-list").text()),initialize:function(a){var b=a.target||$(".events");b.append(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),TeamForm=Parse.View.extend({className:"",renderedtemplate:_.template($("#team-addition").text()),events:{},initialize:function(){$(".additions").html(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),MessageForm=Parse.View.extend({className:"",renderedtemplate:_.template($("#message-addition").text()),teamTemaplate:_.template($("#teamname-list-item").text()),events:{"click .js-send-message":"sendMessage"},sendMessage:function(){var a=this,b=new Parse.Query(Team);b.equalTo("teamname",$(".js-team-select-dropdown").val()),b.find({success:function(b){var c=new Message;c.set("date",Date.now()),c.set("subject",$(".js-msg-subject").val()),c.set("content",$(".js-msg-content").val()),c.set("team",b[0]),c.save(null,{success:function(){a.$el.remove()}})}})},initialize:function(){$(".additions").html(this.el),this.render();var a=new Parse.Query(Team);a.equalTo("user",Parse.User.current());var b=this;a.find({success:function(a){_.each(a,function(a){$(".js-team-select-dropdown").append(b.teamTemaplate({team:a}))})}})},render:function(){this.$el.html(this.renderedtemplate())}}),NewPlayerForm=Parse.View.extend({className:"",renderedtemplate:_.template($("#player-addition").text()),events:{},initialize:function(){$(".additions").html(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),NewCoachForm=Parse.View.extend({className:"",renderedtemplate:_.template($("#coach-addition").text()),events:{},initialize:function(){$(".additions").html(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}}),NewEventForm=Parse.View.extend({className:"",renderedtemplate:_.template($("#event-addition").text()),events:{},initialize:function(){$(".additions").html(this.el),this.render()},render:function(){this.$el.html(this.renderedtemplate())}});